<script>
  document.getElementById("formulario-revenda").addEventListener("submit", function(e) {
    e.preventDefault();

    const empresa = document.getElementById("empresa").value;
    const cnpj = document.getElementById("cnpj").value;
    const responsavel = document.getElementById("responsavel").value;
    const email = document.getElementById("email").value;
    const telefone = document.getElementById("telefone").value;
    const itens = document.getElementById("itens").value;
    const mensagem = document.getElementById("mensagem").value;

    // Limpa a mensagem de retorno anterior
    document.getElementById("retorno").textContent = "";
    document.getElementById("retorno").style.color = "initial"; // Reseta a cor

    const payload = {
      fields: {
        TITLE: `Cadastro de Revenda - ${empresa}`, // Título do Lead
        NAME: responsavel,                       // Nome do Contato associado ao Lead
        // COMPANY_TITLE: empresa,               // Opcional: Se quiser preencher o campo "Empresa" do Lead diretamente
        PHONE: [{ VALUE: telefone, VALUE_TYPE: "WORK" }],
        EMAIL: [{ VALUE: email, VALUE_TYPE: "WORK" }],
        COMMENTS: `Empresa: ${empresa}\nCNPJ: ${cnpj}\nItens de Interesse: ${itens}\nMensagem: ${mensagem}`,
        // Se precisar mapear CNPJ, Itens de Interesse para campos específicos no Bitrix24,
        // você precisará usar os IDs dos campos personalizados (UF_CRM_XXXXX).
        // Exemplo:
        // "UF_CRM_123456789": cnpj, // Substitua UF_CRM_123456789 pelo ID real do campo CNPJ
        // "UF_CRM_987654321": itens // Substitua UF_CRM_987654321 pelo ID real do campo Itens de Interesse
      },
      params: {
        REGISTER_SONET_EVENT: "Y" // Opcional: Para registrar o evento no feed do Bitrix24
      }
    };

    // URL ATUALIZADA COM O WEBHOOK DA IMAGEM:
    fetch("https://nevon.bitrix24.com.br/rest/5/s8h88jpjk5qqc36h/crm.lead.add.json", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    })
    .then(response => {
      // Mesmo que a resposta seja 2xx, o Bitrix pode ter um erro no corpo JSON
      if (!response.ok) {
         // Loga a resposta se não for OK para ajudar na depuração
        response.text
